{% extends "mahasiswa/base.html" %}
{% block content %}
<div class="bg-white p-8 rounded-3xl shadow-2xl border border-gray-100">
    <h1 class="text-3xl font-bold font-heading text-gray-800 mb-6 border-b pb-2 flex items-center">
        <!-- Lucide Icon -->
        <i data-lucide="send" class="w-7 h-7 mr-3 color-primary" style="color: #009879;"></i>
        Formulir Laporan / Aduan Baru
    </h1>
    <p class="text-gray-600 mb-8">Gunakan formulir ini untuk melaporkan masalah fasilitas, layanan, atau akademik di lingkungan kampus.</p>

    <!-- PENTING: Tambahkan enctype="multipart/form-data" -->
    <form method="POST" action="{{ url_for('mahasiswa.create_report') }}" class="space-y-6" enctype="multipart/form-data">
        {{ form.hidden_tag() }}
        
        <!-- Judul Laporan -->
        <div class="bg-soft-gray p-4 rounded-xl border border-gray-200" style="background-color: #F5F7F8;">
            {{ form.judul.label(class_="block text-sm font-semibold text-gray-700 mb-1") }}
            {{ form.judul(class_="mt-1 block w-full px-4 py-3 border border-gray-300 rounded-lg shadow-inner focus:ring-primary focus:border-primary transition duration-150", placeholder="Contoh: AC ruang B-302 mati sejak Senin") }}
            {% for error in form.judul.errors %}
                <span class="text-red-500 text-xs mt-1 block font-medium">{{ error }}</span>
            {% endfor %}
        </div>

        <!-- Kategori Laporan -->
        <div class="bg-soft-gray p-4 rounded-xl border border-gray-200" style="background-color: #F5F7F8;">
            {{ form.kategori.label(class_="block text-sm font-semibold text-gray-700 mb-1") }}
            {{ form.kategori(class_="mt-1 block w-full px-4 py-3 border border-gray-300 rounded-lg shadow-inner focus:ring-primary focus:border-primary transition duration-150") }}
            {% for error in form.kategori.errors %}
                <span class="text-red-500 text-xs mt-1 block font-medium">{{ error }}</span>
            {% endfor %}
        </div>
        
        <!-- Deskripsi Lengkap -->
        <div class="bg-soft-gray p-4 rounded-xl border border-gray-200" style="background-color: #F5F7F8;">
            {{ form.deskripsi.label(class_="block text-sm font-semibold text-gray-700 mb-1") }}
            {{ form.deskripsi(class_="mt-1 block w-full px-4 py-3 border border-gray-300 rounded-lg shadow-inner focus:ring-primary focus:border-primary transition duration-150", rows=6, placeholder="Jelaskan masalah secara rinci: lokasi, waktu terjadi, dan dampaknya...") }}
            {% for error in form.deskripsi.errors %}
                <span class="text-red-500 text-xs mt-1 block font-medium">{{ error }}</span>
            {% endfor %}
        </div>
        
        <!-- Bukti Upload (OPSIONAL) -->
        <div class="bg-soft-gray p-4 rounded-xl border border-gray-200" style="background-color: #F5F7F8;">
            {{ form.bukti_laporan.label(class_="block text-sm font-semibold text-gray-700 mb-1") }}
            <!-- Styling file input agar sesuai tema UMU -->
            {{ form.bukti_laporan(class_="mt-1 block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-primary/10 file:text-primary-dark hover:file:bg-primary/20") }}
            <p class="text-xs text-gray-500 mt-1">Opsional. Format: JPG, PNG, GIF.</p>
            {% for error in form.bukti_laporan.errors %}
                <span class="text-red-500 text-xs mt-1 block font-medium">{{ error }}</span>
            {% endfor %}
        </div>
        <!-- Akhir Bukti Upload -->

        <!-- Submit Button -->
        <div>
            <!-- Tombol Submit dengan Lucide Icon -->
            <button type="submit" class="w-full flex justify-center py-3 px-4 border border-transparent rounded-xl shadow-md text-base font-bold text-white bg-primary hover:bg-primary-dark focus:outline-none focus:ring-4 focus:ring-offset-2 focus:ring-primary/50 transition duration-150 cursor-pointer" style="background-color: #009879;">
                <i data-lucide="send" class="w-5 h-5 mr-2"></i>
                Kirim Laporan
            </button>
        </div>
    </form>
</div>
<script>
    // Pastikan ikon Lucide di-render di halaman ini
    document.addEventListener('DOMContentLoaded', function() {
        if (typeof lucide !== 'undefined') {
            lucide.createIcons();
        }
    });
</script>
{% endblock content %}